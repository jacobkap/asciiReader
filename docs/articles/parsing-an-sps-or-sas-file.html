<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parsing an .sps or .sas file • asciiSetupReader</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Parsing an .sps or .sas file">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">asciiSetupReader</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction_to_asciiSetupReader.html">Introduction to asciiSetupReader</a>
    </li>
    <li>
      <a href="../articles/making-an-sps-file.html">Making an .sps file</a>
    </li>
    <li>
      <a href="../articles/parsing-an-sps-or-sas-file.html">Parsing an .sps or .sas file</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jacobkap/asciiSetupReader">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Parsing an .sps or .sas file</h1>
                        <h4 class="author">Jacob Kaplan</h4>
            
            <h4 class="date">2019-10-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jacobkap/asciiSetupReader/blob/master/vignettes/parsing-an-sps-or-sas-file.Rmd"><code>vignettes/parsing-an-sps-or-sas-file.Rmd</code></a></small>
      <div class="hidden name"><code>parsing-an-sps-or-sas-file.Rmd</code></div>

    </div>

    
    
<p>The <code>parse_setup</code> function is what this packages uses to convert the .sps or .sas setup files into an usable format for R.</p>
<p>This will return a list of length 3 containing the objects “setup”, “value_labels”, and “missing”.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Using the example .sps setup file included with the package</span></a>
<a class="sourceLine" id="cb1-2" title="2">sps_name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"example_setup.sps"</span>,</a>
<a class="sourceLine" id="cb1-3" title="3">                          <span class="dt">package =</span> <span class="st">"asciiSetupReader"</span>)</a>
<a class="sourceLine" id="cb1-4" title="4">example &lt;-<span class="st"> </span>asciiSetupReader<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/asciiSetupReader/topics/parse_setup">parse_setup</a></span>(sps_name)</a></code></pre></div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>setup</h2>
<p>The first object in the returned list is a data.frame with 4 columns and as many rows as there are columns in the data. The “column_number” column is the non-descriptive name of the column while the “column_name” is the descriptive name of the column. In <code>read_ascii_setup</code>, setting <code>use_clean_names</code> to TRUE will set the data column names to the “column_name” names, otherwise it will remain as the “column_number” names. Since the data is in fixed-width format, you need to know the location of each column. The “begin” and “end” columns in this object provide that location for each column in the data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(example<span class="op">$</span>setup)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt;   column_number         column_name begin end</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt; 1            V1     IDENTIFIER_CODE     1   1</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; 2            V2  NUMERIC_STATE_CODE     2   3</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt; 3            V3            ORI_CODE     4  10</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; 4            V4               GROUP    11  12</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt; 5            V5 GEOGRAPHIC_DIVISION    13  13</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt; 6            V6                YEAR    14  17</span></a></code></pre></div>
</div>
<div id="value_labels" class="section level2">
<h2 class="hasAnchor">
<a href="#value_labels" class="anchor"></a>value_labels</h2>
<p>To make the data more compact, the data often provides values that represent a label. For example, in a column about participant’s gender it may only include “M” and “F” which stands for “Male” and “Female”. The setup file will say the M = Male and F = Female. The value labels tell us that we need to convert M to Male in the given column. This is a list of named vectors indicating the value and its corresponding label. If there are no value labels this object will be NULL.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">example<span class="op">$</span>value_labels[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; $V1</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; SHR master file </span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt;             "6" </span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; $V2</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;         Alabama         Arizona        Arkansas      California </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt;             "1"             "2"             "3"             "4" </span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt;        Colorado     Connecticut        Delaware Washington, D.C </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt;             "5"             "6"             "7"             "8" </span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt;         Florida         Georgia           Idaho        Illinois </span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt;             "9"            "10"            "11"            "12" </span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;         Indiana            Iowa          Kansas        Kentucky </span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt;            "13"            "14"            "15"            "16" </span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co">#&gt;       Louisiana           Maine        Maryland   Massachusetts </span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt;            "17"            "18"            "19"            "20" </span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt;        Michigan       Minnesota     Mississippi        Missouri </span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt;            "21"            "22"            "23"            "24" </span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="co">#&gt;         Montana        Nebraska          Nevada   New Hampshire </span></a>
<a class="sourceLine" id="cb3-20" title="20"><span class="co">#&gt;            "25"            "26"            "27"            "28" </span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co">#&gt;      New Jersey      New Mexico        New York  North Carolina </span></a>
<a class="sourceLine" id="cb3-22" title="22"><span class="co">#&gt;            "29"            "30"            "31"            "32" </span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co">#&gt;    North Dakota            Ohio        Oklahoma          Oregon </span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="co">#&gt;            "33"            "34"            "35"            "36" </span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="co">#&gt;    Pennsylvania    Rhode Island  South Carolina    South Dakota </span></a>
<a class="sourceLine" id="cb3-26" title="26"><span class="co">#&gt;            "37"            "38"            "39"            "40" </span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="co">#&gt;       Tennessee           Texas            Utah         Vermont </span></a>
<a class="sourceLine" id="cb3-28" title="28"><span class="co">#&gt;            "41"            "42"            "43"            "44" </span></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="co">#&gt;        Virginia      Washington   West Virginia       Wisconsin </span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co">#&gt;            "45"            "46"            "47"            "48" </span></a>
<a class="sourceLine" id="cb3-31" title="31"><span class="co">#&gt;         Wyoming          Alaska          Hawaii      Canal Zone </span></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="co">#&gt;            "49"            "50"            "51"            "52" </span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="co">#&gt;     Puerto Rico  American Samoa            Guam  Virgin Islands </span></a>
<a class="sourceLine" id="cb3-34" title="34"><span class="co">#&gt;            "53"            "54"            "55"            "62" </span></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-36" title="36"><span class="co">#&gt; $V4</span></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="co">#&gt;               Possessions         ALL cit 250,000 + </span></a>
<a class="sourceLine" id="cb3-38" title="38"><span class="co">#&gt;                       "0"                       "1" </span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="co">#&gt;       Cit 100,000-249,999         Cit 50,000-99,999 </span></a>
<a class="sourceLine" id="cb3-40" title="40"><span class="co">#&gt;                       "2"                       "3" </span></a>
<a class="sourceLine" id="cb3-41" title="41"><span class="co">#&gt;         Cit 25,000-49,999         Cit 10,000-24,999 </span></a>
<a class="sourceLine" id="cb3-42" title="42"><span class="co">#&gt;                       "4"                       "5" </span></a>
<a class="sourceLine" id="cb3-43" title="43"><span class="co">#&gt;           Cit 2,500-9,999               Cit &lt; 2,500 </span></a>
<a class="sourceLine" id="cb3-44" title="44"><span class="co">#&gt;                       "6"                       "7" </span></a>
<a class="sourceLine" id="cb3-45" title="45"><span class="co">#&gt;               Non-MSA co.              MSA counties </span></a>
<a class="sourceLine" id="cb3-46" title="46"><span class="co">#&gt;                       "8"                       "9" </span></a>
<a class="sourceLine" id="cb3-47" title="47"><span class="co">#&gt;           Cit 1,000,000 +       Cit 500,000-999,999 </span></a>
<a class="sourceLine" id="cb3-48" title="48"><span class="co">#&gt;                      "1A"                      "1B" </span></a>
<a class="sourceLine" id="cb3-49" title="49"><span class="co">#&gt;       Cit 250,000-499,999     Non-MSA co. 100,000 + </span></a>
<a class="sourceLine" id="cb3-50" title="50"><span class="co">#&gt;                      "1C"                      "8A" </span></a>
<a class="sourceLine" id="cb3-51" title="51"><span class="co">#&gt; Non-MSA co. 25,000-99,999 Non-MSA co. 10,000-24,999 </span></a>
<a class="sourceLine" id="cb3-52" title="52"><span class="co">#&gt;                      "8B"                      "8C" </span></a>
<a class="sourceLine" id="cb3-53" title="53"><span class="co">#&gt;      Non-MSA co. &lt; 10,000         Non-MSA St Police </span></a>
<a class="sourceLine" id="cb3-54" title="54"><span class="co">#&gt;                      "8D"                      "8E" </span></a>
<a class="sourceLine" id="cb3-55" title="55"><span class="co">#&gt;         MSA co. 100,000 +     MSA co. 25,000-99,999 </span></a>
<a class="sourceLine" id="cb3-56" title="56"><span class="co">#&gt;                      "9A"                      "9B" </span></a>
<a class="sourceLine" id="cb3-57" title="57"><span class="co">#&gt;     MSA co. 10,000-24,999          MSA co. &lt; 10,000 </span></a>
<a class="sourceLine" id="cb3-58" title="58"><span class="co">#&gt;                      "9C"                      "9D" </span></a>
<a class="sourceLine" id="cb3-59" title="59"><span class="co">#&gt;             MSA St Police </span></a>
<a class="sourceLine" id="cb3-60" title="60"><span class="co">#&gt;                      "9E"</span></a></code></pre></div>
<p>There is one named vector for each column in the data that has value labels. We can see how many there are using <code><a href="https://www.rdocumentation.org/packages/base/topics/length">length()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(example<span class="op">$</span>value_labels)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; [1] 141</span></a></code></pre></div>
</div>
<div id="missing" class="section level2">
<h2 class="hasAnchor">
<a href="#missing" class="anchor"></a>missing</h2>
<p>The final object in the list a data.frame with two columns and as many rows as there are missing values in the data. The column “variable” indicates the column in the data and the column “values” says that the value in that row is to be replaced with NA. For example, if there are 10 columns in the data with missing values and each column has two missing values (e.g. -8 and -9) there will be 20 rows in this data.frame. A missing value is when the data includes a value that should be replaced with NA. For example, data often includes negative values such as -8 or -9 mean that that value is missing and should be NA. If there are no missing values this object will be NULL.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(example<span class="op">$</span>missing)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt; NULL</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#setup">setup</a></li>
      <li><a href="#value_labels">value_labels</a></li>
      <li><a href="#missing">missing</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jacob Kaplan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
